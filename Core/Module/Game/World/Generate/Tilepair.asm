
                ifndef _MODULE_GAME_WORLD_GENERATE_TILEPAIR_
                define _MODULE_GAME_WORLD_GENERATE_TILEPAIR_
; -----------------------------------------
; генерация тайлопары
; In:
;   A  - индекс окружения
;   HL - адрес левого ID
; Out:
; Corrupt:
; Note:
; -----------------------------------------
Tilepair:       LD B, #00
                LD C, A

                LD HL, -SCR_WORLD_SIZE_Y
                ADD HL, DE

                ; прибавить к адресу таблицы смещение индекса * 16
                LD A, (HL)
                ADD A, A    ; x2
                ADD A, A    ; x4
                ADD A, A    ; x8
                LD L, A
                LD H, B
                ADD HL, HL  ; x16
                ADD HL, BC  ; + индекс окружения
                LD BC, .Table
                ADD HL, BC

                LD A, (HL)

                RET

                align 2
.Table          ; 0
                DB #00, #00, #02, #01, #03, #00, #03, #02
                DB #00, #00, #02, #02, #00, #00, #02, #02
                ; 1
                DB #13, #13, #16, #16, #13, #13, #16, #16
                DB #13, #04, #16, #16, #16, #08, #16, #16
                ; 2
                DB #14, #0B, #0B, #0B, #0B, #14, #0B, #0B
                DB #14, #0B, #0B, #0B, #0B, #14, #0B, #0B
                ; 3
                DB #15, #15, #17, #17, #17, #17, #17, #17
                DB #15, #15, #17, #17, #17, #17, #17, #17
                ; 4
                DB #00, #00, #00, #00, #00, #00, #00, #16
                DB #00, #00, #00, #00, #00, #00, #00, #16
                ; 5
                DB #00, #00, #00, #00, #00, #00, #00, #0B
                DB #00, #00, #00, #00, #00, #00, #00, #0B
                ; 6
                DB #15, #15, #17, #17, #09, #15, #17, #17
                DB #15, #15, #17, #17, #09, #15, #17, #17
                ; 7
                DB #00, #00, #01, #01, #00, #00, #01, #01
                DB #00, #00, #01, #01, #00, #00, #01, #01
                ; 8
                DB #00, #00, #02, #02, #00, #00, #02, #02
                DB #00, #00, #02, #02, #00, #00, #02, #02
                ; 9
                DB #00, #00, #03, #03, #00, #00, #03, #03
                DB #00, #00, #03, #03, #00, #00, #03, #03
                ; A
                DB #0D, #0D, #10, #10, #0D, #0D, #10, #10
                DB #0D, #0D, #10, #10, #0D, #0D, #10, #10
                ; B
                DB #0E, #18, #11, #11, #0E, #0E, #11, #11
                DB #0E, #18, #11, #11, #0E, #0E, #11, #11
                ; C
                DB #00, #00, #00, #00, #00, #00, #00, #17
                DB #00, #00, #00, #00, #00, #00, #00, #17
                ; D
                DB #07, #07, #04, #04, #07, #07, #04, #04
                DB #07, #07, #04, #04, #07, #07, #04, #04
                ; E
                DB #08, #08, #08, #08, #08, #08, #08, #08
                DB #08, #08, #08, #08, #08, #08, #08, #08
                ; F
                DB #00, #00, #00, #00, #00, #00, #00, #02
                DB #00, #00, #00, #00, #00, #00, #00, #11
                ; 10
                DB #0D, #0D, #10, #10, #0D, #0D, #10, #10
                DB #0D, #0D, #10, #10, #0D, #0D, #10, #10
                ; 11
                DB #0E, #0E, #11, #11, #0E, #0E, #11, #11
                DB #0E, #18, #11, #11, #19, #0E, #11, #11
                ; 12
                DB #00, #00, #00, #00, #00, #00, #00, #02
                DB #00, #00, #00, #00, #00, #00, #00, #11
                ; 13
                DB #00, #00, #00, #00, #00, #00, #00, #02
                DB #00, #00, #00, #00, #00, #00, #00, #11
                ; 14
                DB #00, #00, #00, #00, #00, #00, #00, #02
                DB #00, #00, #00, #00, #00, #00, #00, #11
                ; 15
                DB #00, #00, #02, #02, #00, #00, #02, #02
                DB #00, #00, #02, #02, #00, #00, #02, #02
                ; 16
                DB #0E, #18, #11, #11, #19, #0E, #11, #11
                DB #0E, #18, #11, #11, #19, #0E, #11, #11
                ; 17
                DB #0E, #18, #11, #11, #19, #0E, #11, #11
                DB #0E, #18, #11, #11, #19, #0E, #11, #11
                ; 18
                DB #07, #07, #07, #07, #07, #07, #07, #07
                DB #07, #07, #07, #07, #07, #07, #07, #07
                ; 19
                DB #09, #09, #09, #09, #09, #09, #09, #09
                DB #09, #09, #09, #09, #09, #09, #09, #09

                endif ; ~_MODULE_GAME_WORLD_GENERATE_TILEPAIR_
